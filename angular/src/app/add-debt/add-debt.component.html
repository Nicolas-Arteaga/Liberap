<div class="pb-4">
  <!-- Header -->
  <header class="d-flex align-items-center gap-3 px-4 py-3">
    <button class="btn p-0 border-0 bg-transparent" (click)="handleCancel()">
      <ion-icon name="arrow-back-outline" class="text-white fs-5"></ion-icon>
    </button>
    <h1 class="text-white fw-bold mt-0 fs-4 text-center w-100">
      Analizar resumen
    </h1>
  </header>

  <!-- Main Content -->
  <main class="px-4">
    <app-card-content class="py-4">
      <div class="text-center space-y-4">
        <!-- Icono grande -->
        <ion-icon name="cloud-upload-outline" class="text-success fs-1"></ion-icon>

        <!-- Título -->
        <h2 class="text-white fw-bold fs-3 mb-2">
          Subí tu resumen bancario
        </h2>

        <!-- Descripción -->
        <p class="text-white-50 text-sm px-4 leading-relaxed mb-3">
          PDF descargado desde tu home banking o foto del resumen en papel.<br>
          Detectamos automáticamente si te están cobrando intereses abusivos.
        </p>

        <!-- Área de subida -->
        <div class="file-upload-wrapper position-relative">
          <input
            #fileInput
            type="file"
            accept=".pdf,image/*"
            (change)="onFileSelected($event)"
            class="position-absolute w-100 h-100 opacity-0 cursor-pointer"
            style="top: 0; left: 0; z-index: 10;">

          <app-glass-button
            variant="solid"
            class="w-full py-3 rounded-3xl fw-bold text-lg position-relative">
            <div class="d-flex align-items-center justify-content-center gap-2">
              <ion-icon name="document-attach-outline" class="fs-4"></ion-icon>
              <span>
                {{ selectedFile ? selectedFile.name : 'Seleccionar resumen' }}
              </span>
            </div>
          </app-glass-button>
        </div>

        <!-- Feedback del archivo -->
        <div class="mt-2" *ngIf="selectedFile">
          <p class="text-success text-sm fw-medium mb-0">
            ✓ Archivo listo para analizar
          </p>
        </div>

        <!-- Si no hay archivo -->
        <p class="text-white-50 text-sm mt-2 mb-0" *ngIf="!selectedFile">
          PDF o imagen • Máx 10MB
        </p>
      </div>

      <!-- Divider -->
      <div class="profile-divider my-4"></div>

      <!-- Recordatorio -->
      <div class="px-2">
        <app-toggle
          label="Activar recordatorio"
          description="Te enviaremos una notificación antes del vencimiento"
          [(value)]="reminderEnabled">
        </app-toggle>
      </div>
    </app-card-content>

    <!-- Botón de análisis -->
    <div class="mt-4">
      <app-glass-button
        variant="solid"
        (click)="handleAnalyze()"
        [disabled]="!selectedFile"
        class="w-full py-3 rounded-3xl fw-bold text-xl shadow-2xl">
        <div class="d-flex align-items-center justify-content-center gap-2">
          <ion-icon name="search-outline" class="fs-5"></ion-icon>
          <span>Analizar resumen ahora</span>
        </div>
      </app-glass-button>
    </div>
  </main>
</div>
<main class="px-4 space-y-5 pt-4">
  
  <!-- Header -->
  <header class="mb-3">
    <h1 class="text-white fw-bold fs-2 mb-1">
      Perfil de Trader
    </h1>
    <p class="text-white-50 text-sm">
      Configuraci√≥n y estad√≠sticas de trading
    </p>
  </header>

  <!-- Perfil del Trader -->
  <app-card-content>
    <div class="d-flex align-items-start mb-3">
      <!-- Avatar - c√≠rculo con √≠cono de trader -->
      <div class="profile-avatar me-3">
        <ion-icon name="rocket-outline" class="text-white fs-1"></ion-icon>
      </div>
      
      <!-- Informaci√≥n del trader -->
      <div class="flex-grow-1">
        <p class="name mt-1">{{ traderProfile.name }}</p>
        <p class="email mt-1">{{ traderProfile.email }}</p>
        
        <!-- Stats r√°pidas del trader -->
        <div class="d-flex gap-3 mt-3">
          <div>
            <p class="text-white fw-bold mb-0">{{ traderProfile.accuracy }}%</p>
            <p class="text-white-50 text-xs mb-0">Precisi√≥n</p>
          </div>
          <div>
            <p class="text-success fw-bold mb-0">+{{ formatCurrency(traderProfile.totalProfit) }}</p>
            <p class="text-white-50 text-xs mb-0">Ganancia</p>
          </div>
          <div>
            <p class="text-white fw-bold mb-0">{{ traderProfile.activeStrategies }}</p>
            <p class="text-white-50 text-xs mb-0">Estrategias</p>
          </div>
        </div>
      </div>
    </div>
 
    <!-- Bot√≥n de edici√≥n -->
    <app-glass-button
      class="w-100 py-3"
      (click)="onEditProfile()">
      <ion-icon name="create-outline" class="me-2"></ion-icon>
      Editar perfil de trader
    </app-glass-button>
  </app-card-content>

  <!-- Exchanges Conectados -->
  <section class="space-y-3">
    <p class="text-white font-medium text-base px-2">üîó Exchanges Conectados</p>
    
    @for (api of connectedApis; track api.name) {
      <app-card-icon 
        [icon]="api.connected ? 'link-outline' : 'link-outline'"
        [status]="api.connected ? 'success' : 'danger'"
        [statusLabel]="api.connected ? 'Conectado' : 'Desconectado'"
        [useCardContentBg]="true"
        (click)="onConnectExchange()">
        
        <div class="flex flex-col py-2">
          <div class="d-flex justify-content-between align-items-start">
            <p class="text-white text-sm font-medium mb-0">{{ api.name }}</p>
            @if (api.connected && api.lastSync) {
              <span class="text-white-50 text-xs">{{ api.lastSync }}</span>
            }
          </div>
          <p class="text-white-50 text-xs mb-0 mt-1">
            {{ api.connected ? 'API conectada y funcionando' : 'Conectar para trading autom√°tico' }}
          </p>
        </div>
      </app-card-icon>
    }
  </section>

  <!-- Configuraci√≥n de Trading -->
  <section class="space-y-3 mt-4">
    <p class="text-white font-medium text-base px-2">‚öôÔ∏è Configuraci√≥n</p>
    
    <!-- API Keys y Seguridad -->
    <app-card-icon 
      icon="key-outline"
      [useCardContentBg]="true"
      (click)="onApiKeys()">
      <div class="flex flex-col">
        <p class="text-white text-sm font-medium mt-3 mb-1">
          API Keys y Seguridad
        </p>
        <p class="text-white-60 text-xs mb-3">
          Gestiona tus claves de API y 2FA
        </p>
      </div>
    </app-card-icon>

    <!-- Configuraci√≥n de Trading -->
    <app-card-icon 
      icon="stats-chart-outline"
      [useCardContentBg]="true"
      (click)="onTradingSettings()">
      <div class="flex flex-col">
        <p class="text-white text-sm font-medium mt-3 mb-1">
          Configuraci√≥n de Trading
        </p>
        <p class="text-white-60 text-xs mb-3">
          Par√°metros, apalancamiento, stop-loss
        </p>
      </div>
    </app-card-icon>

    <!-- Alertas y Notificaciones -->
    <app-card-icon 
      icon="notifications-outline"
      [useCardContentBg]="true"
      (click)="onAlertsSettings()">
      <div class="flex flex-col">
        <p class="text-white text-sm font-medium mt-3 mb-1">
          Sistema de Alertas
        </p>
        <p class="text-white-60 text-xs mb-3">
          Configura las alertas 1-2-3-4 y notificaciones push
        </p>
      </div>
    </app-card-icon>

    <!-- Backup y Datos -->
    <app-card-icon 
      icon="cloud-download-outline"
      [useCardContentBg]="true"
      (click)="onBackupData()">
      <div class="flex flex-col">
        <p class="text-white text-sm font-medium mt-3 mb-1">
          Backup y Exportaci√≥n
        </p>
        <p class="text-white-60 text-xs mb-3">
          Exporta tu historial de trades y datos
        </p>
      </div>
    </app-card-icon>

    <!-- Ayuda y Soporte -->
    <app-card-icon 
      icon="help-circle-outline"
      [useCardContentBg]="true"
      (click)="onHelp()">
      <div class="flex flex-col">
        <p class="text-white text-sm font-medium mt-3 mb-1">
          Ayuda y Soporte
        </p>
        <p class="text-white-60 text-xs mb-3">
          Tutoriales, FAQ y contacto
        </p>
      </div>
    </app-card-icon>
  </section>

  <!-- Informaci√≥n del Perfil de Riesgo -->
  <section class="mt-4">
    <app-card-content class="p-4">
      <div class="d-flex align-items-center gap-3">
        <ion-icon name="shield-outline" class="text-warning fs-4"></ion-icon>
        <div>
          <p class="text-white text-sm font-medium mb-0">
            Perfil de Riesgo: 
            <span [class]="getRiskColor(traderProfile.riskTolerance)">
              {{ traderProfile.riskTolerance }}
            </span>
          </p>
          <p class="text-white-50 text-xs mb-0">
            Nivel de Trader: {{ traderProfile.tradingLevel }} ‚Ä¢ Miembro desde {{ traderProfile.joinDate }}
          </p>
        </div>
      </div>
    </app-card-content>
  </section>

  <!-- Cerrar Sesi√≥n -->
  <section class="pt-4 space-y-4">
    <app-glass-button 
      variant="danger"
      (click)="onLogout()">
      <ion-icon name="log-out-outline" class="me-2"></ion-icon>
      Cerrar sesi√≥n
    </app-glass-button>

    <!-- Versi√≥n de la App -->
    <div class="text-center pt-2">
      <p class="text-white-50 text-xs">
        Crypto Predictor v1.0.0 ‚Ä¢ Trade Responsably
      </p>
    </div>
  </section>

</main>
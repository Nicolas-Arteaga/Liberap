<main class="px-4 space-y-8 pt-4">

  <!-- Dashboard Card - Mismo diseño, nuevo contenido potente -->
  <app-card-content class="mb-2">
    <div class="mb-6">
      <p class="label text-white/60 text-xs mb-1">
        <!-- Usuario nuevo -->
        <span *ngIf="!hasAnalyses">¿Cuánto te están robando los bancos?</span>
        <!-- Usuario con análisis -->
        <span *ngIf="hasAnalyses">Ahorro potencial detectado</span>
      </p>
      <p class="text-white fw-bold fs-2">
        <!-- Usuario nuevo: texto motivador -->
        <span *ngIf="!hasAnalyses">Descubrilo en 2 minutos</span>
        <!-- Usuario con análisis: número grande -->
        <span *ngIf="hasAnalyses">${{ totalPotentialSavings.toLocaleString('es-AR') }}</span>
      </p>
    </div>

    <!-- Próximo vencimiento → Próximo reclamo posible (mismo componente) -->
    <app-card-icon icon="calendar-outline">
      <div class="flex flex-col gap-0 items-start mt-3">
        <p class="label text-white/60 text-xs mb-0">
          <span *ngIf="!hasAnalyses">Primer análisis gratis disponible</span>
          <span *ngIf="hasAnalyses">Próximo reclamo recomendado</span>
        </p>
        <p class="value text-white text-sm font-medium">
          <span *ngIf="!hasAnalyses">Hoy mismo</span>
          <span *ngIf="hasAnalyses">15 de Enero, 2026</span>
        </p>
      </div>
    </app-card-icon>

    <!-- Botón principal -->
    <div class="mt-2">
      <app-glass-button 
        class="w-full" 
        [routerLink]="'/debt-detail'">
        <span *ngIf="!hasAnalyses">Analizar mi primer resumen – GRATIS</span>
        <span *ngIf="hasAnalyses">Ver mis reclamos y cartas</span>
      </app-glass-button>
    </div>
  </app-card-content>

  <!-- Quick Actions - Mismo grid hermoso -->
  <section class="space-y-4">
    <p class="text-white font-medium text-base px-2 mb-3 mt-3">Herramientas</p>
    <div class="actions-grid px-0">
      <app-card-icon
        icon="analytics-outline"
        variant="stacked"
        [useCardContentBg]="true"
        routerLink="/add-debt">
        <p class="text-white text-sm">Analizar resumen</p>
      </app-card-icon>
      
      <app-card-icon
        icon="mail-outline" 
        variant="stacked"
        [useCardContentBg]="true"
        routerLink="/generate-letter">
        <p class="text-white text-sm">Generar carta</p>
      </app-card-icon>
      
      <app-card-icon
        icon="time-outline"
        variant="stacked"
        [useCardContentBg]="true"
        routerLink="/history">
        <p class="text-white text-sm">Historial</p>
      </app-card-icon>
    </div>
  </section>

  <!-- Deudas recientes → Mis análisis recientes (misma lista perfecta) -->
  <section class="space-y-4">
    <div class="section-header">
      <p class="text-white font-medium text-base">
        <span *ngIf="!hasAnalyses">Ejemplos reales de usuarios</span>
        <span *ngIf="hasAnalyses">Mis análisis recientes</span>
      </p>
      <button class="see-all mb-2" routerLink="/all-analyses">
        Ver todas
      </button>
    </div>

    <div class="space-y-3">
      @for (item of recentAnalyses; track item.name) {
        <div class="debt-card-wrapper">
          <app-card-icon
            [icon]="item.icon"
            [status]="getStatusColor(item.status)"
            [statusLabel]="getStatusLabel(item.status)"
            [useCardContentBg]="true">
            <div class="flex flex-col py-2">
              <p class="text-white text-sm font-medium mb-1">
                {{ item.name }}
              </p>
              <div class="flex items-center gap-2 mt-2">
                <span class="text-white font-semibold">
                  ${{ item.amount.toLocaleString('es-AR') }}
                </span>
                <span class="text-white-50 text-xs" *ngIf="hasAnalyses">ahorro potencial</span>
              </div>
            </div>
          </app-card-icon>
        </div>
      }
    </div>
  </section>

</main>
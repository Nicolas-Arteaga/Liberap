<ion-content class="ion-padding login-content">

  <div class="login-container">
    <div class="login-card">

      <!-- Logo -->
      <div class="logo-container d-flex justify-content-center mt-4">
        <img src="assets/images/logo/logo-login.png" alt="Verge Logo" class="logo-image" height="140">
      </div>

      <!-- Title -->
      <div class="text-center mb-4">
        <h2 class="text-white fw-semibold mt-2">
          Aprovecha el momento.
        </h2>
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="alert alert-danger mb-4 rounded-4" role="alert">
        {{ errorMessage }}
      </div>

      <!-- Form -->
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="d-flex flex-column gap-4">

        <!-- Email -->
        <div>
          <app-label htmlFor="username" class="text-white mb-2">
            Email
          </app-label>
          <app-input id="username" formControlName="username" type="email" autocomplete="email"
            placeholder="tu@email.com" [required]="true" />
          <div *ngIf="hasError('username', 'required')" class="text-danger small mt-1">
            El email es obligatorio
          </div>
          <div *ngIf="hasError('username', 'email')" class="text-danger small mt-1">
            Formato de email inválido
          </div>
        </div>

        <!-- Password -->
        <div>
          <app-label htmlFor="password" class="text-white mb-2">
            Contraseña
          </app-label>
          <app-input id="password" formControlName="password" type="password" placeholder="••••••••" [required]="true"
            autocomplete="current-password" showPasswordToggle></app-input>
          <div *ngIf="hasError('password', 'required')" class="text-danger small mt-1">
            La contraseña es obligatoria
          </div>
          <div *ngIf="hasError('password', 'minlength')" class="text-danger small mt-1">
            Mínimo 4 caracteres
          </div>
        </div>

        <!-- Forgot -->
        <div class="text-end">
          <button type="button" class="btn btn-link p-0 text-success text-decoration-none" (click)="onForgotPassword()">
            Recuperar acceso
          </button>
        </div>

        <!-- Login -->
        <app-glass-button variant="solid" type="submit" [disabled]="isLoading">
          <span *ngIf="!isLoading">Iniciar análisis</span>
          <span *ngIf="isLoading">Ingresando…</span>
        </app-glass-button>



      </form>
    </div>
  </div>

</ion-content>
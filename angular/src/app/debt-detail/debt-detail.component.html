<div class="min-vh-100">
  <!-- Header simple -->
   <header class="d-flex align-items-center gap-3 px-4 py-4">
    <button 
      class="btn p-0 border-0 bg-transparent"
      (click)="onBack()">
      <ion-icon name="arrow-back-outline" class="text-white fs-5"></ion-icon>
    </button>
    <h1 class="text-white fw-bold mt-0 fs-4 text-center w-100">Detalle de deuda</h1>
  </header>

  <!-- Main Content -->
  <main class="px-4 mb-4">
    <div class="card-wrapper mb-4"> 
      <!-- Tarjeta 1: Resumen Principal -->
      <app-card-content  class="mb-4">
        <!-- Nombre y estado -->
        <div>
          <h2 class="text-white fw-bold fs-3 mb-2">{{ debt.name }}</h2>
          <span 
            class="badge rounded-pill px-3 py-1 fs-7"
            [style.background]="getStatusInfo().bgColor"
            [style.color]="getStatusInfo().color">
            {{ getStatusInfo().label }}
          </span>
        </div>

        <!-- Monto total -->
        <div class="mt-3">
          <p class="text-white-50 mb-1">Monto total adeudado</p>
          <p class="text-white fw-bold fs-2">
            ${{ debt.totalAmount.toLocaleString('es-AR') }}
          </p>
        </div>

        <!-- Fecha de vencimiento -->
        <div class="profile-divider mb-3"></div>
        <div class="d-flex align-items-center justify-content-between">
          <span class="text-white-50">Fecha de vencimiento</span>
          <span class="text-white fw-medium">{{ debt.dueDate }}</span>
        </div>

        <!-- Botón Registrar pago -->
        <app-glass-button 
          (click)="onRegisterPayment()"
          class="mt-4">
          <div class="d-flex align-items-center justify-content-center gap-2">
            <span>Registrar pago</span>
          </div>
        </app-glass-button>
      </app-card-content>
    </div>
    <div class="card-wrapper mb-4"> 
      <!-- Tarjeta 2: Información detallada -->
      <app-card-content>
        <h3 class="text-white fw-bold mb-4">Información detallada</h3>
        
        <div class="space-y-1">
          <!-- Monto original -->
          <div class="d-flex align-items-center justify-content-between py-3">
            <span class="text-white-50">Monto original</span>
            <span class="text-white fw-medium">
              ${{ debt.originalAmount.toLocaleString('es-AR') }}
            </span>
          </div>
          <div class="profile-divider"></div>
          
          <!-- Intereses acumulados -->
          <div class="d-flex align-items-center justify-content-between py-3">
            <span class="text-white-50">Intereses acumulados</span>
            <span class="text-danger fw-medium">
              ${{ debt.accumulatedInterest.toLocaleString('es-AR') }}
            </span>
          </div>
          <div class="profile-divider"></div>
          
          <!-- Pago mínimo -->
          <div class="d-flex align-items-center justify-content-between py-3">
            <span class="text-white-50">Pago mínimo</span>
            <span class="text-white fw-medium">
              ${{ debt.minimumPayment.toLocaleString('es-AR') }}
            </span>
          </div>
          <div class="profile-divider"></div>
          
          <!-- Próxima cuota -->
          <div class="d-flex align-items-center justify-content-between py-3">
            <span class="text-white-50">Próxima cuota</span>
            <span class="text-white fw-medium">
              ${{ debt.nextInstallment.toLocaleString('es-AR') }}
            </span>
          </div>
          <div class="profile-divider"></div>
          
          <!-- Días restantes -->
          <div class="d-flex align-items-center justify-content-between py-3">
            <span class="text-white-50">Días restantes</span>
            <span [class.text-danger]="debt.daysRemaining < 0" 
                  [class.text-success]="debt.daysRemaining >= 0"
                  class="fw-medium">
              {{ debt.daysRemaining < 0 ? 
                'Vencida (' + (-debt.daysRemaining) + ' días)' : 
                debt.daysRemaining + ' días' }}
            </span>
          </div>
        </div>
      </app-card-content>
    </div>
    <div class="card-wrapper mb-2"> 
    <!-- Tarjeta 3: Historial de pagos -->   
    <app-card-content class="payment-history-card">
      <h3 class="text-white fw-bold mb-5">Historial de pagos</h3>
      
      <div>
        <div *ngFor="let payment of paymentHistory; let last = last" 
            class="payment-item d-flex align-items-start position-relative">
          
          <!-- Contenedor de círculo -->
          <div class="payment-circle-container">
            <div class="payment-circle-outer" [class]="getPaymentStatusClass(payment.status).circleClass">
              <div class="payment-circle-inner">
                <ion-icon [name]="getPaymentStatusClass(payment.status).icon"></ion-icon>
              </div>
            </div>
          </div>
          
          <!-- Contenido -->
          <div class="payment-details d-flex justify-content-between align-items-center w-100 mt-0">
            <div>
              <p class="text-white mb-0">${{ payment.amount.toLocaleString('es-AR') }}</p>
              <span [class]="getPaymentStatusClass(payment.status).textClass">
                {{ getPaymentStatusLabel(payment.status) }}
              </span>
            </div>
            
            <div class="payment-date text-white-50 mb-2">
              {{ payment.date }}
            </div>
          </div>
        </div>
      </div>
    </app-card-content>
    </div>
    <!-- Botones de acción -->
    <div class="d-flex gap-3 pt-3 mb-3 mt-1">
      <!-- Editar deuda -->
      <button 
        class="btn btn-outline-success flex-grow-1 py-3 rounded-4 border-1"
        (click)="onEditDebt()">
        <div class="d-flex align-items-center justify-content-center gap-2">
          <ion-icon name="create-outline"></ion-icon>
          <span>Editar deuda</span>
        </div>
      </button>

      <!-- Eliminar deuda -->
      <button 
        class="btn btn-outline-danger flex-grow-1 py-3 rounded-4 border-1"
        (click)="onDeleteDebt()">
        <div class="d-flex align-items-center justify-content-center gap-2">
          <ion-icon name="trash-outline"></ion-icon>
          <span>Eliminar deuda</span>
        </div>
      </button>
    </div>

  </main>
</div>